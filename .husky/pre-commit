#!/bin/sh

# Get list of staged Python files
STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep -E '\.py$' || true)

if [ -z "$STAGED_FILES" ]; then
    echo "No Python files to check"
    exit 0
fi

echo "ğŸ” Running pre-commit checks on Python files..."

# 1. Format check
echo "1/4 âœ¨ Checking code formatting..."
uv run ruff format $STAGED_FILES

# 2. Linting
echo "2/4 ğŸ” Running linter..."
uv run ruff check $STAGED_FILES
# 3. Type checking
echo "3/4 ğŸ”¬ Running type checker..."
uv run pyright $STAGED_FILES

echo "âœ… All pre-commit checks passed!"
